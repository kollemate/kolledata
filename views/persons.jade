extends layout

block content
    //- include partials/alerts

    p.lead.col-lg-10.nopadding
        | Personen

    p.col-lg-2.input-sm.pull-right
        input(id='searchInput',type='text',onkeyup='searchThis()',placeholder='Suche..')

    table.table.table-hover(id='datatable')
        tr
            th NAME
            th URL
            th COMPANY
            th EDIT
        - for (var i = 0; i < results.length; i++) {
            tr
                td
                    =results[i]['per_firstname']
                    =' '
                    =results[i]['per_name']
                td
                    a(href=results[i]['per_url'])
                        span=            url.parse(results[i]['per_url']).hostname
                        span.text-muted= url.parse(results[i]['per_url']).path
                td=results[i]['com_name']
                td
                    //-----------
                    //- BUTTONS
                    //-----------
                    .pull-right
                        - if (results[i]['per_memo'].length > 0) {
                            button.btn.btn-info.btn-xs.showmemo(type='button') ▼
                        - }
                        input.hidden(type='text',id='id',name='id',value=results[i]['per_id'])
                    .pull-right
                        form(method='post',action='/persons/delete',)
                            - var personshortdesc = { name: results[i]['per_name'] , firstname: results[i]['per_firstname'] }
                            button.btn.btn-danger.btn-xs(type='submit', name='per_id', value=results[i]['per_id'], onClick="return confirm('Wollen Sie #{personshortdesc.firstname} #{personshortdesc.name} wirklich löschen?')") ✘
                    .pull-right
                        form(method='get',action='/persons/'+results[i]['per_id'])
                            button.btn.btn-primary.btn-xs(type='submit') INFO
            - if (results[i]['per_memo'].length > 0) {
            tr.memo(id='memo_'+results[i]['per_id'])
                td(colspan='4').well
                    p.input.col-lg-11=results[i]['per_memo']
                    .col-lg-3.pull-right
                        .pull-right.editbutton
                            button.btn.btn-default.btn-xs(type='button') EDIT
                        .pull-right.hidden.confirmbuttons
                            button.btn.btn-default.btn-xs.cancelbutton(type='button') ABBRECHEN
                            button.btn.btn-primary.btn-xs.submitbutton(type='submit') SPEICHERN
            - }
        - }

    p
        button.btn.btn-default.btn-sm.btn-block(type='button',id='newentrybtn',data-toggle='modal',data-target='#detailmodal') NEUEN EINTRAG HINZUFÜGEN

    .modal.fade(tabindex='-1',role='dialog',aria-labelledby='Infos',aria-hidden='true',id='detailmodal')
        .modal-dialog
            .modal-content
                .modal-header
                    button.close(type='button',data-dismiss='modal',aria-hidden='true') ×
                    h3.modal-title Informationen
                .modal-body
                    form.form-horizontal(method='post')
                        fieldset
                            .form-group
                                label.col-lg-2.control-label(for='firstName') Vorname
                                .col-lg-10
                                    input.form-control(type='text',id='firstName',name='firstName',placeholder='Vorname')
                            .form-group
                                label.col-lg-2.control-label(for='lastName') Nachname
                                .col-lg-10
                                    input.form-control(type='text',id='lastName',name='lastName',placeholder='Nachname')
                            .form-group
                                label.col-lg-2.control-label(for='url') URL
                                .col-lg-10
                                    input.form-control(type='text',id='url',name='url',placeholder='http://kolle-mate.de')
                            .form-group
                                label.col-lg-2.control-label(for='email') E-Mail
                                .col-lg-10
                                    input.form-control(type='text',id='email',name='email',placeholder='max@mustermann.de')
                            .form-group
                                label.col-lg-2.control-label(for='memo') Memo
                                .col-lg-10
                                    textarea.form-control(type='text',input='memo',name='memo',rows='10')
                            .form-group
                                label.col-lg-2.control-label(for='company') Firma
                                .col-lg-10
                                    select.form-control(id='company',name='company')
                                        option - N/A -
                                        - for (var i = 0; i < companies.length; i++) {
                                            option=companies[i]['com_name']
                                        - }
                        .pull-right
                            button.btn.btn-default.btn-xs(type='button',data-dismiss='modal') ABBRECHEN
                            button.btn.btn-primary.btn-xs(type='submit') SPEICHERN
                        .clearfix
